@model GenericEmailViewModel
@using EMS.Data.Enums
@{
    ViewData["Title"] = "_AllEmailPartial";
}


@if (Model.Status == EmailStatus.Invalid.ToString())
{
    <tr class="alert-dark">
        <td>@Model.Id</td>
        <td>@Model.DateReceived</td>
        <td>@Model.SenderEmail</td>
        <td>@Model.SenderName</td>
        <td>@Model.Subject</td>
        <td>@Model.Status</td>
        <td>@Model.HasAttachments</td>
        <td>
            <a class="btn btn-link" id="preview-email-@Model.Id" data-toggle="modal" data-target="#preview-all-email-modal-@Model.Id">Preview</a>
        </td>
        <td>
            @if (User.IsInRole("manager"))
            {
                <a class="text-info ml-1" asp-controller="Email" asp-action="MarkNotReviewed" asp-route-id="@Model.Id"><i class="fa fa-check-square" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Change Status to Not Reviewed"></i></a>
            }

        </td>
    </tr>
}
else
{
    <tr>
        <td>@Model.Id</td>
        <td>@Model.DateReceived</td>
        <td>@Model.SenderEmail</td>
        <td>@Model.SenderName</td>
        <td>@Model.Subject</td>
        <td>@Model.Status</td>
        <td>@Model.HasAttachments</td>
        <td>
            <a class="btn btn-link" id="preview-email-@Model.Id" data-toggle="modal" data-target="#preview-all-email-modal-@Model.Id">Preview</a>
        </td>
        <td>
            @if (Model.Status == EmailStatus.NotReviewed.ToString())
            {
                <a class="text-danger ml-1" asp-controller="Email" asp-action="MarkInvalid" asp-route-id="@Model.Id">
                    <i class="fa fa-trash fa-lg icon-action" data-toggle="tooltip" data-placement="bottom" title="Mark Invalid"></i>
                </a>
            }
        </td>
    </tr>
}


@*Preview Email Modal*@
<div class="modal fade" id="preview-all-email-modal-@Model.Id" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #343A40; color: white;">
                <h5 class="modal-title" id="exampleModalLabel">Email Preview</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: white;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body pl-5 pr-5 pt-4 pb-4" style="background-color: #E3E3E3;">
                <div class="pl-4 pr-4 pt-4 pb-4" style="background-color: white;">
                    <div class="row">
                        <div class="font-weight-bolder col-2" style="color: #525252">
                            Email ID
                        </div>
                        <div class="col-8" style="color: #525252">
                            @Model.Id
                        </div>
                    </div>
                    <hr style="color: #939393" />
                    <div class="row">
                        <div class="font-weight-bolder col-2" style="color: #525252">
                            Status
                        </div>
                        <div class="col-8" style="color: #525252;">
                            @Model.Status
                        </div>
                    </div>
                </div>
                @*style="border-top: 1px solid lightgrey; box-shadow: inset 0 12px 12px -12px rgba(0, 0, 0, 0.5);"*@

                <div class="ml-4 mr-4 mt-4">
                    <div class="row">
                        <div class="col-2 text-right" style="color: #525252">
                            From:
                        </div>
                        <div class="col-8" style="color: #525252;">
                            <span class="font-weight-bolder">@Model.SenderName</span>
                            <span class="font-italic">&lt;@Model.SenderEmail&gt;</span>
                            <p>@Model.DateReceived</p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-2 text-right" style="color: #525252">
                            Subject:
                        </div>
                        <div class="col-8" style="color: #525252;">
                            <span class="font-weight-bolder">@Model.Subject</span>
                            @if (!Model.HasAttachments)
                            {
                                <p class="font-italic">No attachments</p>
                            }
                        </div>
                    </div>
                </div>

                <div class="pl-4 pr-4 pt-4 pb-4" style="background-color: white; width: 100%; border-radius: 5px;">

                    @for (int i = 0; i < 50; i++)
                    {
                        <p>Test</p>
                    }
                </div>
            </div>
            <div class="modal-footer" style="background-color: white; border-top: 1px solid #B0B0B0;">
                <button type="button" class="btn btn-outline-secondary" data-dismiss="modal" style="color: #525252;">
                    Cancel
                </button>
                <button type="button" class="btn btn-dark">
                    Mark invalid
                </button>
                <button type="button" class="btn" style="background-color: #EC7424; color: white">
                    Mark new
                </button>
            </div>
        </div>
    </div>
</div>


<script>
$('#preview-email-@Model.Id').click(function () {
    $('#preview-all-email-modal-@Model.Id').modal('show');
    $.
});
</script>

@section Scripts {
    @*<script src="~/js/email-preview.js"></script>*@
}

@*onclick="location.href = '@(Url.Action("ShowFullEmail", "Email"))'"*@
